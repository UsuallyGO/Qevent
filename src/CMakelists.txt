IF(WIN32)
    CMAKE_MINIMUM_REQUIRED(VERSION 2.4.6 FATAL_ERROR) 
ELSE(WIN32) 
    IF(APPLE) 
        CMAKE_MINIMUM_REQUIRED(VERSION 2.6.0 FATAL_ERROR)
    ELSE(APPLE) 
        CMAKE_MINIMUM_REQUIRED(VERSION 2.4.4 FATAL_ERROR) 
    ENDIF(APPLE) 
ENDIF(WIN32)

IF(COMMAND cmake_policy)
    CMAKE_POLICY(SET CMP0003 NEW)
ENDIF()

PROJECT(Qevent)

SET(QEVENT_INCLUDE ${PROJECT_SOURCE_DIR}/../include)
INCLUDE_DIRECTORIES(${QEVENT_INCLUDE})

SET(QEVENT_SRC
    memory.c
    event.c 
    signal.c
    select.c
    utility.c)

SET(Qeventlib "qevent") 
ADD_LIBRARY(${Qeventlib} SHARED ${QEVENT_SRC})

INSTALL(TARGETS ${Qeventlib} RUNTIME DESTINATION bin
        LIBRARY DESTINATION lib
        ARCHIVE DESTINATION lib) 
INSTALL(DIRECTORY ${PROJECT_SOURCE_DIR}/../include/qevent 
        DESTINATION ${CMAKE_INSTALL_PREFIX}/include
        DIRECTORY_PERMISSIONS PATTERN ".svn" EXCLUDE) 